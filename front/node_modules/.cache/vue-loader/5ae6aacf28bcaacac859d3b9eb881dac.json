{"remainingRequest":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/patorusty/dev/web/vision/front/src/views/pages/Administracion/Companias/ModalCompanias.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/patorusty/dev/web/vision/front/src/views/pages/Administracion/Companias/ModalCompanias.vue","mtime":1614396236854},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGh0dHAgZnJvbSAiLi4vLi4vLi4vLi4vaHR0cC1yZXF1ZXN0IjsKaW1wb3J0IHsgaGVscGVycyB9IGZyb20gIi4uLy4uLy4uLy4uL2hlbHBlcnMiOwppbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gImRlYm91bmNlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtoZWxwZXJzXSwKICBkYXRhOiAoKSA9PiAoewogICAgcnVsZXM6IHsKICAgICAgcmVxdWlyZWQ6IHZhbHVlID0+ICEhdmFsdWUgfHwgIkVzdGUgY2FtcG8gb2JsaWdhdG9yaW8iLAogICAgICBlbWFpbDogdmFsdWUgPT4gewogICAgICAgIGNvbnN0IHBhdHRlcm4gPSAvXigoW148PigpW1xdXFwuLDs6XHNAIl0rKFwuW148PigpW1xdXFwuLDs6XHNAIl0rKSopfCgiLisiKSlAKChcW1swLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31dKXwoKFthLXpBLVpcLTAtOV0rXC4pK1thLXpBLVpdezIsfSkpJC87CiAgICAgICAgcmV0dXJuIHBhdHRlcm4udGVzdCh2YWx1ZSkgfHwgIklncmVzZSB1biBlbWFpbCB2w6FsaWRvIjsKICAgICAgfQogICAgfSwKICAgIGxvY2FsaWRhZGVzOiBbXSwKICAgIGN1aXRVc2FkbzogZmFsc2UKICB9KSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoImNvbXBhbmlhIiwgWyJjb21wYW5pYSJdKSwKICAgIC4uLm1hcFN0YXRlKCJtb2RhbCIsIFsibW9kYWwiLCAiZWRpY2lvbiJdKQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucygiY29tcGFuaWEiLCBbCiAgICAgICJnZXRDb21wYW5pYSIsCiAgICAgICJ1cGRhdGVDb21wYW5pYSIsCiAgICAgICJjcmVhdGVDb21wYW5pYSIKICAgIF0pLAogICAgLi4ubWFwTXV0YXRpb25zKCJtb2RhbCIsIFsiSElERV9NT0RBTCJdKSwKICAgIC4uLm1hcE11dGF0aW9ucygiY29tcGFuaWEiLCBbIlJFU0VUX0NPTVBBTklBIl0pLAogICAgYXN5bmMgY3JlYXRlKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICBjb25zdCBjcmVhdGVSZXN1bHQgPSBhd2FpdCB0aGlzLmNyZWF0ZUNvbXBhbmlhKHRoaXMuY29tcGFuaWEpOwogICAgICAgIGlmIChjcmVhdGVSZXN1bHQpIHsKICAgICAgICAgIHRoaXMuY2xvc2VNb2RhbCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGFzeW5jIHVwZGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgY29uc3QgdXBkYXRlUmVzdWx0ID0gYXdhaXQgdGhpcy51cGRhdGVDb21wYW5pYSh0aGlzLmNvbXBhbmlhKTsKICAgICAgICBpZiAodXBkYXRlUmVzdWx0KSB7CiAgICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZU1vZGFsKCkgewogICAgICB0aGlzLkhJREVfTU9EQUwoZmFsc2UpOwogICAgICB0aGlzLlJFU0VUX0NPTVBBTklBKCk7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgICAgdGhpcy5jdWl0VXNhZG8gPSBmYWxzZTsKICAgIH0sCiAgICBidXNjYXJDdWl0OiBkZWJvdW5jZShhc3luYyBmdW5jdGlvbigpIHsKICAgICAgaWYgKAogICAgICAgIHRoaXMuY29tcGFuaWEuY3VpdC5sZW5ndGggPj0gNiAmJgogICAgICAgIHRoaXMuY29tcGFuaWEuY3VpdCAhPSB0aGlzLmNvbXBhbmlhLmN1aXRPcmlnaW5hbAogICAgICApIHsKICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgaHR0cC5wb3N0KCIvY29tcGFuaWFzL2J1c3F1ZWRhQ3VpdCIsIHsKICAgICAgICAgIGN1aXQ6IHRoaXMuY29tcGFuaWEuY3VpdAogICAgICAgIH0pOwogICAgICAgIHRoaXMuY3VpdFVzYWRvID0gcmVzcC5kYXRhLnVzYWRvOwogICAgICB9CiAgICB9LCA3MDApCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5jYXJnYXJMb2NhbGlkYWRlcygpOwogIH0sCiAgd2F0Y2g6IHsKICAgIG1vZGFsKCkgewogICAgICBpZiAoIXRoaXMubW9kYWwpIHsKICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["ModalCompanias.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiKA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalCompanias.vue","sourceRoot":"src/views/pages/Administracion/Companias","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      <span\n        v-if=\"!edicion\"\n        class=\"headline\"\n      >Crear Compania</span>\n      <span\n        v-else\n        class=\"headline\"\n      >Editar Compania</span>\n    </v-card-title>\n    <v-card-text>\n      <v-container>\n        <v-form ref=\"form\">\n          <v-row>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-model=\"compania.nombre\"\n                :rules=\"[rules.required]\"\n                label=\"Nombre\"\n                v-uppercase\n              >\n              </v-text-field>\n            </v-col>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                v-model=\"compania.cuit\"\n                @keyup=\"buscarCuit\"\n                :rules=\"[\n                  rules.required,\n                  !cuitUsado || 'Este CUIT ya está en uso',\n                ]\"\n                label=\"CUIT\"\n              >\n              </v-text-field>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                v-model=\"compania.codigo_lr\"\n                label=\"Libros Rubricados\"\n              ></v-text-field>\n            </v-col>\n            <v-col class=\"pt-0 pb-0 d-flex justify-center\">\n              <v-switch\n                v-model=\"compania.activo\"\n                label=\"Activo\"\n                inset\n                primary\n              ></v-switch>\n            </v-col>\n            <v-col class=\"pt-0 pb-0 d-flex justify-center\">\n              <v-avatar\n                color=\"primary\"\n                size=\"62\"\n              >\n                <span class=\"white--text headline\">62</span>\n              </v-avatar>\n            </v-col>\n            <!-- <v-col>\n            <v-color-picker class=\"ma-2\" hide-canvas></v-color-picker>\n          </v-col> -->\n          </v-row>\n          <v-row>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                v-model=\"compania.direccion\"\n                :rules=\"[rules.required]\"\n                label=\"Direccion\"\n              ></v-text-field>\n            </v-col>\n            <v-col class=\"pt-0 pb-0\">\n              <v-autocomplete\n                :rules=\"[rules.required]\"\n                :items=\"localidades\"\n                :item-text=\"localidadesText\"\n                item-value=\"id\"\n                v-model=\"compania.localidad_id\"\n                label=\"Localidad\"\n              ></v-autocomplete>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                :rules=\"[rules.required]\"\n                v-model=\"compania.telefono_1\"\n                label=\" Telefono Oficina\"\n              ></v-text-field>\n            </v-col>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                :rules=\"[rules.required]\"\n                v-model=\"compania.telefono_aux\"\n                label=\" Telefono Auxilio\"\n              ></v-text-field>\n            </v-col>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                :rules=\"[rules.required]\"\n                v-model=\"compania.telefono_siniestros\"\n                label=\" Telefono Siniestros\"\n              ></v-text-field>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                :rules=\"[rules.email, rules.required]\"\n                label=\"Email Emision\"\n                v-model=\"compania.email_emision\"\n              ></v-text-field>\n            </v-col>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                :rules=\"[rules.email, rules.required]\"\n                label=\"Email Siniestros\"\n                v-model=\"compania.email_siniestros\"\n              ></v-text-field>\n            </v-col>\n          </v-row>\n        </v-form>\n      </v-container>\n    </v-card-text>\n    <v-card-actions class=\" pt-0 pb-0 d-flex justify-end\">\n      <v-btn\n        class=\"mb-2\"\n        color=\"red\"\n        text\n        @click=\"closeModal\"\n      >Cerrar</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-if=\"!edicion\"\n        color=\"green\"\n        @click=\"create\"\n        text\n        native-type=\"submit\"\n      >Crear</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-else\n        @click=\"update\"\n        text\n        color=\"green\"\n      >Guardar</v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nimport { mapState, mapActions, mapMutations } from \"vuex\";\nimport http from \"../../../../http-request\";\nimport { helpers } from \"../../../../helpers\";\nimport { debounce } from \"debounce\";\n\nexport default {\n  mixins: [helpers],\n  data: () => ({\n    rules: {\n      required: value => !!value || \"Este campo obligatorio\",\n      email: value => {\n        const pattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return pattern.test(value) || \"Igrese un email válido\";\n      }\n    },\n    localidades: [],\n    cuitUsado: false\n  }),\n  computed: {\n    ...mapState(\"compania\", [\"compania\"]),\n    ...mapState(\"modal\", [\"modal\", \"edicion\"])\n  },\n  methods: {\n    ...mapActions(\"compania\", [\n      \"getCompania\",\n      \"updateCompania\",\n      \"createCompania\"\n    ]),\n    ...mapMutations(\"modal\", [\"HIDE_MODAL\"]),\n    ...mapMutations(\"compania\", [\"RESET_COMPANIA\"]),\n    async create() {\n      if (this.$refs.form.validate()) {\n        const createResult = await this.createCompania(this.compania);\n        if (createResult) {\n          this.closeModal();\n        }\n      }\n    },\n    async update() {\n      if (this.$refs.form.validate()) {\n        const updateResult = await this.updateCompania(this.compania);\n        if (updateResult) {\n          this.closeModal();\n        }\n      }\n    },\n    closeModal() {\n      this.HIDE_MODAL(false);\n      this.RESET_COMPANIA();\n      this.$refs.form.resetValidation();\n      this.cuitUsado = false;\n    },\n    buscarCuit: debounce(async function() {\n      if (\n        this.compania.cuit.length >= 6 &&\n        this.compania.cuit != this.compania.cuitOriginal\n      ) {\n        const resp = await http.post(\"/companias/busquedaCuit\", {\n          cuit: this.compania.cuit\n        });\n        this.cuitUsado = resp.data.usado;\n      }\n    }, 700)\n  },\n  created() {\n    this.cargarLocalidades();\n  },\n  watch: {\n    modal() {\n      if (!this.modal) {\n        this.closeModal();\n      }\n    }\n  }\n};\n</script>\n\n<style>\n</style>"]}]}