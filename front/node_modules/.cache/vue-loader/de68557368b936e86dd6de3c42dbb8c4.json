{"remainingRequest":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/patorusty/dev/web/vision/front/src/views/pages/Administracion/Organizadores/ModalOrganizadores.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/patorusty/dev/web/vision/front/src/views/pages/Administracion/Organizadores/ModalOrganizadores.vue","mtime":1614396212053},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGh0dHAgZnJvbSAiLi4vLi4vLi4vLi4vaHR0cC1yZXF1ZXN0IjsKaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICJkZWJvdW5jZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogKCkgPT4gKHsKICAgIGN1aXRVc2FkbzogZmFsc2UsCiAgICBtYXRyaWN1bGFVc2FkYTogZmFsc2UsCiAgICBydWxlczogewogICAgICByZXF1aXJlZDogdmFsdWUgPT4gISF2YWx1ZSB8fCAiRXN0ZSBjYW1wbyBvYmxpZ2F0b3JpbyIsCiAgICAgIGVtYWlsOiB2YWx1ZSA9PiB7CiAgICAgICAgY29uc3QgcGF0dGVybiA9IC9eKChbXjw+KClbXF1cXC4sOzpcc0AiXSsoXC5bXjw+KClbXF1cXC4sOzpcc0AiXSspKil8KCIuKyIpKUAoKFxbWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlwtMC05XStcLikrW2EtekEtWl17Mix9KSkkLzsKICAgICAgICByZXR1cm4gcGF0dGVybi50ZXN0KHZhbHVlKSB8fCAiSWdyZXNlIHVuIGVtYWlsIHbDoWxpZG8iOwogICAgICB9CiAgICB9CiAgfSksCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCJvcmdhbml6YWRvciIsIFsib3JnYW5pemFkb3IiXSksCiAgICAuLi5tYXBTdGF0ZSgibW9kYWwiLCBbIm1vZGFsIiwgImVkaWNpb24iXSkKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoIm9yZ2FuaXphZG9yIiwgWwogICAgICAicmVzZXRPcmdhbml6YWRvclN0YXRlIiwKICAgICAgInVwZGF0ZU9yZ2FuaXphZG9yIiwKICAgICAgImNyZWF0ZU9yZ2FuaXphZG9yIgogICAgXSksCiAgICAuLi5tYXBNdXRhdGlvbnMoIm1vZGFsIiwgWyJISURFX01PREFMIl0pLAogICAgLi4ubWFwTXV0YXRpb25zKCJvcmdhbml6YWRvciIsIFsiUkVTRVRfT1JHQU5JWkFET1IiXSksCiAgICBhc3luYyBjcmVhdGUoKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgewogICAgICAgIGNvbnN0IGNyZWF0ZVJlc3VsdCA9IGF3YWl0IHRoaXMuY3JlYXRlT3JnYW5pemFkb3IodGhpcy5vcmdhbml6YWRvcik7CiAgICAgICAgaWYgKGNyZWF0ZVJlc3VsdCkgewogICAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYXN5bmMgdXBkYXRlKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICBjb25zdCB1cGRhdGVSZXN1bHQgPSBhd2FpdCB0aGlzLnVwZGF0ZU9yZ2FuaXphZG9yKHRoaXMub3JnYW5pemFkb3IpOwogICAgICAgIGlmICh1cGRhdGVSZXN1bHQpIHsKICAgICAgICAgIHRoaXMuY2xvc2VNb2RhbCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNsb3NlTW9kYWwoKSB7CiAgICAgIHRoaXMuSElERV9NT0RBTChmYWxzZSk7CiAgICAgIHRoaXMuUkVTRVRfT1JHQU5JWkFET1IoKTsKICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0VmFsaWRhdGlvbigpOwogICAgICB0aGlzLmN1aXRVc2FkbyA9IGZhbHNlOwogICAgICB0aGlzLm1hdHJpY3VsYVVzYWRhID0gZmFsc2U7CiAgICB9LAogICAgYnVzY2FyQ3VpdDogZGVib3VuY2UoYXN5bmMgZnVuY3Rpb24oKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLm9yZ2FuaXphZG9yLmN1aXQubGVuZ3RoID49IDYgJiYKICAgICAgICB0aGlzLm9yZ2FuaXphZG9yLmN1aXQgIT0gdGhpcy5vcmdhbml6YWRvci5jdWl0T3JpZ2luYWwKICAgICAgKSB7CiAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGh0dHAucG9zdCgiL29yZ2FuaXphZG9yZXMvYnVzcXVlZGFDdWl0IiwgewogICAgICAgICAgY3VpdDogdGhpcy5vcmdhbml6YWRvci5jdWl0CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jdWl0VXNhZG8gPSByZXNwLmRhdGEudXNhZG87CiAgICAgIH0KICAgIH0sIDcwMCksCiAgICBidXNjYXJNYXRyaWN1bGE6IGRlYm91bmNlKGFzeW5jIGZ1bmN0aW9uKCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy5vcmdhbml6YWRvci5tYXRyaWN1bGEubGVuZ3RoID49IDMgJiYKICAgICAgICB0aGlzLm9yZ2FuaXphZG9yLm1hdHJpY3VsYSAhPSB0aGlzLm9yZ2FuaXphZG9yLm1hdHJpY3VsYU9yaWdpbmFsCiAgICAgICkgewogICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBodHRwLnBvc3QoIi9vcmdhbml6YWRvcmVzL2J1c3F1ZWRhTWF0cmljdWxhIiwgewogICAgICAgICAgbWF0cmljdWxhOiB0aGlzLm9yZ2FuaXphZG9yLm1hdHJpY3VsYQogICAgICAgIH0pOwogICAgICAgIHRoaXMubWF0cmljdWxhVXNhZGEgPSByZXNwLmRhdGEudXNhZG87CiAgICAgIH0KICAgIH0sIDcwMCkKICB9LAogIHdhdGNoOiB7CiAgICBtb2RhbCgpIHsKICAgICAgaWYgKCF0aGlzLm1vZGFsKSB7CiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["ModalOrganizadores.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalOrganizadores.vue","sourceRoot":"src/views/pages/Administracion/Organizadores","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      <span\n        v-if=\"!edicion\"\n        class=\"headline\"\n      >Crear Organizador</span>\n      <span\n        v-else\n        class=\"headline\"\n      >Editar Organizador</span>\n    </v-card-title>\n    <v-card-text>\n      <v-container>\n        <v-form ref=\"form\">\n          <v-row>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                v-model=\"organizador.nombre\"\n                label=\"Nombre\"\n                :rules=\"[rules.required]\"\n              ></v-text-field>\n            </v-col>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                v-model=\"organizador.apellido\"\n                label=\"Apellido\"\n                :rules=\"[rules.required]\"\n              ></v-text-field>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                v-model=\"organizador.cuit\"\n                label=\"CUIT\"\n                @keyup=\"buscarCuit\"\n                :rules=\"[\n                  rules.required,\n                  !cuitUsado || 'Este CUIT ya está en uso',\n                ]\"\n              ></v-text-field>\n            </v-col>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                v-model=\"organizador.email\"\n                label=\"Email\"\n                :rules=\"[rules.email, rules.required]\"\n              ></v-text-field>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                v-model=\"organizador.telefono_1\"\n                label=\"Telefono\"\n                :rules=\"[rules.required]\"\n              ></v-text-field>\n            </v-col>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                v-model=\"organizador.telefono_2\"\n                label=\"Telefono Alt.\"\n                :rules=\"[rules.required]\"\n              ></v-text-field>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col class=\"pt-0 pb-0\">\n              <v-text-field\n                v-uppercase\n                v-model=\"organizador.matricula\"\n                label=\"Matricula\"\n                @keyup=\"buscarMatricula\"\n                :rules=\"[\n                  rules.required,\n                  !matriculaUsada || 'Esta matricula ya está en uso',\n                ]\"\n              ></v-text-field>\n            </v-col>\n            <v-col class=\"pt-0 pb-0\">\n              <v-switch\n                v-model=\"organizador.activo\"\n                label=\"Organizador Activo?\"\n              ></v-switch>\n            </v-col>\n          </v-row>\n        </v-form>\n      </v-container>\n    </v-card-text>\n    <v-card-actions class=\"pt-0 pb-0 d-flex justify-end\">\n      <v-btn\n        class=\"mb-2\"\n        color=\"red\"\n        text\n        @click=\"closeModal\"\n      >Cerrar</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-if=\"!edicion\"\n        color=\"green\"\n        @click=\"create\"\n        text\n        native-type=\"submit\"\n      >Crear</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-else\n        @click=\"update\"\n        text\n        color=\"green\"\n      >Guardar</v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nimport { mapState, mapActions, mapMutations } from \"vuex\";\nimport http from \"../../../../http-request\";\nimport { debounce } from \"debounce\";\n\nexport default {\n  data: () => ({\n    cuitUsado: false,\n    matriculaUsada: false,\n    rules: {\n      required: value => !!value || \"Este campo obligatorio\",\n      email: value => {\n        const pattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return pattern.test(value) || \"Igrese un email válido\";\n      }\n    }\n  }),\n  computed: {\n    ...mapState(\"organizador\", [\"organizador\"]),\n    ...mapState(\"modal\", [\"modal\", \"edicion\"])\n  },\n  methods: {\n    ...mapActions(\"organizador\", [\n      \"resetOrganizadorState\",\n      \"updateOrganizador\",\n      \"createOrganizador\"\n    ]),\n    ...mapMutations(\"modal\", [\"HIDE_MODAL\"]),\n    ...mapMutations(\"organizador\", [\"RESET_ORGANIZADOR\"]),\n    async create() {\n      if (this.$refs.form.validate()) {\n        const createResult = await this.createOrganizador(this.organizador);\n        if (createResult) {\n          this.closeModal();\n        }\n      }\n    },\n    async update() {\n      if (this.$refs.form.validate()) {\n        const updateResult = await this.updateOrganizador(this.organizador);\n        if (updateResult) {\n          this.closeModal();\n        }\n      }\n    },\n    closeModal() {\n      this.HIDE_MODAL(false);\n      this.RESET_ORGANIZADOR();\n      this.$refs.form.resetValidation();\n      this.cuitUsado = false;\n      this.matriculaUsada = false;\n    },\n    buscarCuit: debounce(async function() {\n      if (\n        this.organizador.cuit.length >= 6 &&\n        this.organizador.cuit != this.organizador.cuitOriginal\n      ) {\n        const resp = await http.post(\"/organizadores/busquedaCuit\", {\n          cuit: this.organizador.cuit\n        });\n        this.cuitUsado = resp.data.usado;\n      }\n    }, 700),\n    buscarMatricula: debounce(async function() {\n      if (\n        this.organizador.matricula.length >= 3 &&\n        this.organizador.matricula != this.organizador.matriculaOriginal\n      ) {\n        const resp = await http.post(\"/organizadores/busquedaMatricula\", {\n          matricula: this.organizador.matricula\n        });\n        this.matriculaUsada = resp.data.usado;\n      }\n    }, 700)\n  },\n  watch: {\n    modal() {\n      if (!this.modal) {\n        this.closeModal();\n      }\n    }\n  }\n};\n</script>\n\n<style>\n</style>"]}]}