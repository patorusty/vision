{"remainingRequest":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/patorusty/dev/web/vision/front/src/views/pages/Administracion/MMV/Tabs/Version/ModalVersion.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/patorusty/dev/web/vision/front/src/views/pages/Administracion/MMV/Tabs/Version/ModalVersion.vue","mtime":1626316687512},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGh0dHAgZnJvbSAiLi4vLi4vLi4vLi4vLi4vLi4vaHR0cC1yZXF1ZXN0IjsKaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICJkZWJvdW5jZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogKCkgPT4gKHsKICAgIHJ1bGVzOiB7CiAgICAgIHJlcXVpcmVkOiB2YWx1ZSA9PiAhIXZhbHVlIHx8ICJFc3RlIGNhbXBvIG9ibGlnYXRvcmlvIgogICAgfSwKICAgIG5vbWJyZVVzYWRvOiBmYWxzZQogIH0pLAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgibWFyY2EiLCBbIm1hcmNhcyJdKSwKICAgIC4uLm1hcFN0YXRlKCJtb2RlbG8iLCBbIm1vZGVsbyIsICJtb2RlbG9zIiwgIm1hcmNhX2lkIl0pLAogICAgLi4ubWFwU3RhdGUoInZlcnNpb24iLCBbInZlcnNpb24iLCAibW9kZWxvX2lkIl0pLAogICAgLi4ubWFwU3RhdGUoIm1vZGFsIiwgWyJtb2RhbDMiLCAiZWRpY2lvbjMiXSkKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoInZlcnNpb24iLCBbImNyZWF0ZVZlcnNpb24iLCAidXBkYXRlVmVyc2lvbiJdKSwKICAgIC4uLm1hcE11dGF0aW9ucygibW9kYWwiLCBbIkhJREVfTU9EQUwzIl0pLAogICAgLi4ubWFwTXV0YXRpb25zKCJ2ZXJzaW9uIiwgWyJSRVNFVF9WRVJTSU9OIl0pLAogICAgYXN5bmMgdXBkYXRlKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICBjb25zdCB1cGRhdGVSZXN1bHQgPSBhd2FpdCB0aGlzLnVwZGF0ZVZlcnNpb24odGhpcy5tb2RlbG8pOwogICAgICAgIGlmICh1cGRhdGVSZXN1bHQpIHsKICAgICAgICAgIHRoaXMuY2xvc2VNb2RhbCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGFzeW5jIGNyZWF0ZSgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgdGhpcy5jcmVhdGVWZXJzaW9uKHRoaXMubW9kZWxvKTsKICAgICAgICBpZiAoY3JlYXRlUmVzdWx0KSB7CiAgICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZU1vZGFsKCkgewogICAgICB0aGlzLkhJREVfTU9EQUwzKGZhbHNlKTsKICAgICAgdGhpcy5SRVNFVF9WRVJTSU9OKCk7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgICAgdGhpcy5ub21icmVVc2FkbyA9IGZhbHNlOwogICAgfSwKICAgIGJ1c2Nhck1vZGVsbzogZGVib3VuY2UoYXN5bmMgZnVuY3Rpb24oKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLnZlcnNpb24ubm9tYnJlLmxlbmd0aCA+PSAyICYmCiAgICAgICAgdGhpcy52ZXJzaW9uLm5vbWJyZSAhPSB0aGlzLnZlcnNpb24ubm9tYnJlT3JpZ2luYWwKICAgICAgKSB7CiAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGh0dHAucG9zdCgiL3ZlcnNpb25lcy9idXNxdWVkYVZlcnNpb24iLCB7CiAgICAgICAgICBub21icmU6IHRoaXMudmVyc2lvbi5ub21icmUsCiAgICAgICAgICBpZDogdGhpcy5tb2RlbG9faWQKICAgICAgICB9KTsKICAgICAgICB0aGlzLm5vbWJyZVVzYWRvID0gcmVzcC5kYXRhLnVzYWRvOwogICAgICB9CiAgICB9LCA3MDApCiAgfQp9Owo="},{"version":3,"sources":["ModalVersion.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalVersion.vue","sourceRoot":"src/views/pages/Administracion/MMV/Tabs/Version","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      <span\n        v-if=\"!edicion3\"\n        class=\"headline\"\n      >Crear Modelo</span>\n      <span\n        v-else\n        class=\"headline\"\n      >Editar Modelo</span>\n    </v-card-title>\n    <v-card-text>\n      <v-container>\n        <v-form ref=\"form\">\n          <v-row>\n            <v-col class=\"pt-0 pb-0\">\n              <v-autocomplete\n                class=\"mt-6\"\n                v-model=\"marca_id\"\n                :items=\"marcas\"\n                item-text=\"nombre\"\n                item-value=\"id\"\n                label=\"Marca\"\n                disabled\n              ></v-autocomplete>\n              <v-autocomplete\n                class=\"mt-6\"\n                v-model=\"modelo_id\"\n                :items=\"modelos\"\n                item-text=\"nombre\"\n                item-value=\"id\"\n                label=\"Modelo\"\n                disabled\n              ></v-autocomplete>\n              <v-text-field\n                v-uppercase\n                v-model=\"version.nombre\"\n                label=\"Nombre\"\n                @keyup=\"buscarModelo\"\n                :rules=\"[\n                  rules.required,\n                  !nombreUsado || 'Este nombre ya estÃ¡ en uso',\n                ]\"\n              ></v-text-field>\n            </v-col>\n          </v-row>\n        </v-form>\n      </v-container>\n    </v-card-text>\n    <v-card-actions class=\"pt-0 pb-0 d-flex justify-end\">\n      <v-btn\n        class=\"mb-2\"\n        color=\"red\"\n        text\n        @click=\"closeModal\"\n      >Cerrar</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-if=\"!edicion3\"\n        color=\"green\"\n        @click=\"create\"\n        text\n        native-type=\"submit\"\n      >Crear</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-else\n        @click=\"update\"\n        text\n        color=\"green\"\n      >Guardar</v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nimport { mapState, mapActions, mapMutations } from \"vuex\";\nimport http from \"../../../../../../http-request\";\nimport { debounce } from \"debounce\";\n\nexport default {\n  data: () => ({\n    rules: {\n      required: value => !!value || \"Este campo obligatorio\"\n    },\n    nombreUsado: false\n  }),\n  computed: {\n    ...mapState(\"marca\", [\"marcas\"]),\n    ...mapState(\"modelo\", [\"modelo\", \"modelos\", \"marca_id\"]),\n    ...mapState(\"version\", [\"version\", \"modelo_id\"]),\n    ...mapState(\"modal\", [\"modal3\", \"edicion3\"])\n  },\n  methods: {\n    ...mapActions(\"version\", [\"createVersion\", \"updateVersion\"]),\n    ...mapMutations(\"modal\", [\"HIDE_MODAL3\"]),\n    ...mapMutations(\"version\", [\"RESET_VERSION\"]),\n    async update() {\n      if (this.$refs.form.validate()) {\n        const updateResult = await this.updateVersion(this.modelo);\n        if (updateResult) {\n          this.closeModal();\n        }\n      }\n    },\n    async create() {\n      if (this.$refs.form.validate()) {\n        const createResult = await this.createVersion(this.modelo);\n        if (createResult) {\n          this.closeModal();\n        }\n      }\n    },\n    closeModal() {\n      this.HIDE_MODAL3(false);\n      this.RESET_VERSION();\n      this.$refs.form.resetValidation();\n      this.nombreUsado = false;\n    },\n    buscarModelo: debounce(async function() {\n      if (\n        this.version.nombre.length >= 2 &&\n        this.version.nombre != this.version.nombreOriginal\n      ) {\n        const resp = await http.post(\"/versiones/busquedaVersion\", {\n          nombre: this.version.nombre,\n          id: this.modelo_id\n        });\n        this.nombreUsado = resp.data.usado;\n      }\n    }, 700)\n  }\n};\n</script>\n\n<style>\n</style>"]}]}