{"remainingRequest":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/patorusty/dev/web/vision/front/src/views/pages/Polizas/Endosos/ModalEndosos.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/patorusty/dev/web/vision/front/src/views/pages/Polizas/Endosos/ModalEndosos.vue","mtime":1632439885523},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgaGVscGVycyB9IGZyb20gIi4uLy4uLy4uLy4uL2hlbHBlcnMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW2hlbHBlcnNdLAogIGRhdGE6ICgpID0+ICh7CiAgICBmZWNoYVNvbGljaXR1ZDogZmFsc2UsCiAgICBmZWNoYUVtaXNpb246IGZhbHNlCiAgfSksCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCJlbmRvc28iLCBbImVuZG9zbyIsICJ0aXBvX2VuZG9zb3MiLCAiZGV0YWxsZV9lbmRvc29zIl0pLAogICAgLi4ubWFwU3RhdGUoIm1vZGFsIiwgWyJtb2RhbDIiLCAiZWRpY2lvbjIiXSksCiAgICAuLi5tYXBTdGF0ZSgicG9saXphIiwgWyJwb2xpemEiXSksCiAgICBkZXRhbGxlX2VuZG9zb3NfcG9yX3RpcG8oKSB7CiAgICAgIHJldHVybiB0aGlzLmVuZG9zby50aXBvX2VuZG9zb19pZCA9PSAxCiAgICAgICAgPyB0aGlzLmRldGFsbGVfZW5kb3Nvcy5maWx0ZXIoZSA9PiBlLnRpcG9fZW5kb3NvX2lkID09IDEpCiAgICAgICAgOiB0aGlzLmRldGFsbGVfZW5kb3Nvcy5maWx0ZXIoZSA9PiBlLnRpcG9fZW5kb3NvX2lkID09IDIpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwTXV0YXRpb25zKCJtb2RhbCIsIFsiSElERV9NT0RBTDIiXSksCiAgICAuLi5tYXBNdXRhdGlvbnMoImVuZG9zbyIsIFsiUkVTRVRfRU5ET1NPIl0pLAogICAgLi4ubWFwQWN0aW9ucygiZW5kb3NvIiwgWyJjcmVhdGVFbmRvc28iLCAidXBkYXRlRW5kb3NvIl0pLAogICAgYXN5bmMgY3JlYXRlKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICB0aGlzLmVuZG9zby5wb2xpemFfaWQgPSB0aGlzLnBvbGl6YS5pZDsKICAgICAgICBjb25zdCBjcmVhdGVSZXN1bHQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVuZG9zbyh0aGlzLmVuZG9zbyk7CiAgICAgICAgaWYgKGNyZWF0ZVJlc3VsdCkgewogICAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYXN5bmMgdXBkYXRlKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICBjb25zdCB1cGRhdGVSZXN1bHQgPSBhd2FpdCB0aGlzLnVwZGF0ZUVuZG9zbyh0aGlzLmVuZG9zbyk7CiAgICAgICAgaWYgKHVwZGF0ZVJlc3VsdCkgewogICAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2xvc2VNb2RhbCgpIHsKICAgICAgdGhpcy5ISURFX01PREFMMihmYWxzZSk7CiAgICAgIHRoaXMuUkVTRVRfRU5ET1NPKCk7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgICAgdGhpcy5jcFVzYWRvID0gZmFsc2U7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgbW9kYWwyKCkgewogICAgICBpZiAoIXRoaXMubW9kYWwyKSB7CiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["ModalEndosos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalEndosos.vue","sourceRoot":"src/views/pages/Polizas/Endosos","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      <span>Endosos</span>\n    </v-card-title>\n    <v-card-text>\n      <v-container>\n        <v-form ref=\"form\">\n          <v-row>\n            <v-col\n              cols=\"6\"\n              class=\" mt-0 py-0\"\n            >\n              <v-menu\n                v-model=\"fechaSolicitud\"\n                :close-on-content-click=\"false\"\n                transition=\"scale-transition\"\n                offset-y\n                min-width=\"290px\"\n              >\n                <template v-slot:activator=\"{ on }\">\n                  <v-text-field\n                    :value=\"formatDate(endoso.fecha_solicitud)\"\n                    @click:clear=\"\n                          $nextTick(() => (endoso.fecha_solicitud = null))\n                        \"\n                    clearable\n                    label=\"Fecha de Solicitud\"\n                    v-on=\"on\"\n                  ></v-text-field>\n                </template>\n                <v-date-picker\n                  v-model=\"endoso.fecha_solicitud\"\n                  clearable\n                  color=\"primary lighten-1\"\n                  no-title\n                  scrollable\n                  locale=\"es-la\"\n                  @input=\"fechaSolicitud = false\"\n                >\n                </v-date-picker>\n              </v-menu>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col class=\" mt-0 py-0\">\n              <v-select\n                label=\"Tipo Endoso\"\n                v-model=\"endoso.tipo_endoso_id\"\n                :items=\"tipo_endosos\"\n                item-text=\"nombre\"\n                item-value=\"id\"\n                :rules=\"[rules.required]\"\n              >\n              </v-select>\n            </v-col>\n            <v-col class=\" mt-0 py-0\">\n              <v-select\n                label=\"Detalle Endoso\"\n                v-model=\"endoso.detalle_endoso_id\"\n                :items=\"detalle_endosos_por_tipo\"\n                item-text=\"nombre\"\n                item-value=\"id\"\n                :rules=\"[rules.required]\"\n              >\n              </v-select>\n            </v-col>\n          </v-row>\n\n          <v-row>\n            <v-col class=\" mt-0 py-0\">\n              <v-menu\n                v-model=\"fechaEmision\"\n                :close-on-content-click=\"false\"\n                transition=\"scale-transition\"\n                offset-y\n                min-width=\"290px\"\n              >\n                <template v-slot:activator=\"{ on }\">\n                  <v-text-field\n                    :value=\"formatDate(endoso.fecha_emision)\"\n                    @click:clear=\"\n                          $nextTick(() => (endoso.fecha_emision = null))\n                        \"\n                    clearable\n                    label=\"Fecha de Emisión\"\n                    v-on=\"on\"\n                  ></v-text-field>\n                </template>\n                <v-date-picker\n                  v-model=\"endoso.fecha_emision\"\n                  clearable\n                  color=\"primary lighten-1\"\n                  no-title\n                  scrollable\n                  locale=\"es-la\"\n                  @input=\"fechaEmision = false\"\n                >\n                </v-date-picker>\n              </v-menu>\n            </v-col>\n            <v-col class=\" mt-0 py-0\">\n              <v-text-field\n                v-model=\"endoso.numero_endoso\"\n                label=\"Número de Endoso\"\n                :rules=\"[rules.required]\"\n              ></v-text-field>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col class=\" mt-0 py-0\">\n              <v-checkbox\n                v-model=\"endoso.completo\"\n                label=\"Completo\"\n              ></v-checkbox>\n            </v-col>\n          </v-row>\n        </v-form>\n      </v-container>\n    </v-card-text>\n    <v-card-actions class=\"d-flex justify-end\">\n      <v-btn\n        class=\"mb-2\"\n        color=\"red\"\n        text\n        @click=\"closeModal\"\n      >Cerrar</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-if=\"!edicion2\"\n        color=\"green\"\n        @click=\"create\"\n        text\n        native-type=\"submit\"\n      >Crear</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-else\n        @click=\"update\"\n        text\n        color=\"green\"\n      >Guardar</v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nimport { mapState, mapActions, mapMutations } from \"vuex\";\nimport { helpers } from \"../../../../helpers\";\n\nexport default {\n  mixins: [helpers],\n  data: () => ({\n    fechaSolicitud: false,\n    fechaEmision: false\n  }),\n  computed: {\n    ...mapState(\"endoso\", [\"endoso\", \"tipo_endosos\", \"detalle_endosos\"]),\n    ...mapState(\"modal\", [\"modal2\", \"edicion2\"]),\n    ...mapState(\"poliza\", [\"poliza\"]),\n    detalle_endosos_por_tipo() {\n      return this.endoso.tipo_endoso_id == 1\n        ? this.detalle_endosos.filter(e => e.tipo_endoso_id == 1)\n        : this.detalle_endosos.filter(e => e.tipo_endoso_id == 2);\n    }\n  },\n  methods: {\n    ...mapMutations(\"modal\", [\"HIDE_MODAL2\"]),\n    ...mapMutations(\"endoso\", [\"RESET_ENDOSO\"]),\n    ...mapActions(\"endoso\", [\"createEndoso\", \"updateEndoso\"]),\n    async create() {\n      if (this.$refs.form.validate()) {\n        this.endoso.poliza_id = this.poliza.id;\n        const createResult = await this.createEndoso(this.endoso);\n        if (createResult) {\n          this.closeModal();\n        }\n      }\n    },\n    async update() {\n      if (this.$refs.form.validate()) {\n        const updateResult = await this.updateEndoso(this.endoso);\n        if (updateResult) {\n          this.closeModal();\n        }\n      }\n    },\n    closeModal() {\n      this.HIDE_MODAL2(false);\n      this.RESET_ENDOSO();\n      this.$refs.form.resetValidation();\n      this.cpUsado = false;\n    }\n  },\n  watch: {\n    modal2() {\n      if (!this.modal2) {\n        this.closeModal();\n      }\n    }\n  }\n};\n</script>"]}]}