{"remainingRequest":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/patorusty/dev/web/vision/front/src/views/pages/Polizas/EditPoliza.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/patorusty/dev/web/vision/front/src/views/pages/Polizas/EditPoliza.vue","mtime":1625183647230},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnNtb290aC1lbnRlci1hY3RpdmUsCi5zbW9vdGgtbGVhdmUtYWN0aXZlIHsKICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNXM7Cn0KLnNtb290aC1lbnRlciwKLnNtb290aC1sZWF2ZS10byB7CiAgbwo="},{"version":3,"sources":["EditPoliza.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0jBA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditPoliza.vue","sourceRoot":"src/views/pages/Polizas","sourcesContent":["<template>\n  <div>\n    <v-card class=\"mt-0 mx-4 pa-3\">\n      <v-form ref=\"form\">\n        <v-container>\n          <v-card-text>\n            <v-row>\n              <v-col :cols=\"3\">\n                <v-select\n                  v-model=\"poliza.cliente_id\"\n                  :items=\"clientes\"\n                  item-value=\"id\"\n                  :item-text=\"nombreCompleto\"\n                  label=\"Asegurado\"\n                  :rules=\"[rules.required]\"\n                ></v-select>\n                <v-select\n                  v-model=\"poliza.tipo_riesgo_id\"\n                  :items=\"tipo_riesgos\"\n                  item-value=\"id\"\n                  item-text=\"nombre\"\n                  label=\"Tipo Riesgo\"\n                  :rules=\"[rules.required]\"\n                ></v-select>\n                <v-select\n                  v-model=\"poliza.compania_id\"\n                  @change=\"getCodigoProductores(poliza.compania_id)\"\n                  :items=\"companias\"\n                  item-value=\"id\"\n                  item-text=\"nombre\"\n                  label=\"Compania\"\n                  :rules=\"[rules.required]\"\n                ></v-select>\n                <v-row>\n                  <v-col class=\"pt-0\">\n                    <v-text-field\n                      v-model=\"poliza.premio\"\n                      label=\"Premio\"\n                      :rules=\"[rules.required]\"\n                    ></v-text-field>\n                    <v-text-field\n                      v-model=\"poliza.comision\"\n                      label=\"Comision\"\n                      :rules=\"[rules.required]\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col class=\"pt-0\">\n                    <v-text-field\n                      v-model=\"poliza.prima\"\n                      label=\"Prima\"\n                    ></v-text-field>\n                    <v-text-field\n                      v-model=\"poliza.descuento\"\n                      label=\"Descuento\"\n                    ></v-text-field>\n                  </v-col>\n                </v-row>\n              </v-col>\n              <v-col :cols=\"3\">\n                <v-select\n                  v-model=\"poliza.codigo_productor_id\"\n                  :items=\"codigo_productores\"\n                  :item-text=\"codigoProdText\"\n                  item-value=\"id\"\n                  label=\"CÃ³digo Productor\"\n                  :rules=\"[rules.required]\"\n                ></v-select>\n                <v-text-field\n                  v-model=\"poliza.numero\"\n                  label=\"Poliza Nro\"\n                ></v-text-field>\n                <v-text-field\n                  disabled\n                  v-model=\"poliza.numero_solicitud\"\n                  label=\"Nro de Solicitud\"\n                ></v-text-field>\n                <v-select\n                  v-model=\"poliza.forma_pago_id\"\n                  :items=\"forma_pagos\"\n                  item-value=\"id\"\n                  item-text=\"nombre\"\n                  label=\"Medio de Pago\"\n                  :rules=\"[rules.required]\"\n                ></v-select>\n                <v-row>\n                  <v-col>\n                    <v-select\n                      class=\"pt-0\"\n                      v-model=\"poliza.plan_pago\"\n                      :items=\"plan_pagos\"\n                      item-text=\"value\"\n                      item-value=\"value\"\n                      label=\"Plan de Pago\"\n                      :rules=\"[rules.required]\"\n                    ></v-select>\n                  </v-col>\n                  <v-col>\n                    <v-text-field\n                      class=\"pt-0\"\n                      v-model=\"poliza.cantidad_cuotas\"\n                      label=\"Cuotas\"\n                      :rules=\"[rules.required]\"\n                    ></v-text-field>\n                  </v-col>\n                </v-row>\n              </v-col>\n              <v-col>\n                <v-row>\n                  <v-col class=\"py-0 d-flex flex-column justify-space-between\">\n                    <v-select\n                      v-model=\"poliza.tipo_vigencia_id\"\n                      :items=\"tipo_vigencias\"\n                      item-text=\"vigencia\"\n                      item-value=\"id\"\n                      label=\"Vigencia\"\n                      @change=\"sumarMes\"\n                    ></v-select>\n                    <v-menu\n                      v-model=\"calendarioDesde\"\n                      :close-on-content-click=\"false\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"290px\"\n                    >\n                      <template v-slot:activator=\"{ on }\">\n                        <v-text-field\n                          :value=\"formatDate(poliza.vigencia_desde)\"\n                          @click:clear=\"\n                          $nextTick(() => (poliza.vigencia_desde = null))\n                        \"\n                          clearable\n                          label=\"Desde\"\n                          v-on=\"on\"\n                        ></v-text-field>\n                      </template>\n                      <v-date-picker\n                        @change=\"sumarMes\"\n                        v-model=\"poliza.vigencia_desde\"\n                        clearable\n                        color=\"primary lighten-1\"\n                        no-title\n                        scrollable\n                        locale=\"es-la\"\n                        @input=\"calendarioDesde = false\"\n                      >\n                      </v-date-picker>\n                    </v-menu>\n                    <v-menu\n                      v-model=\"calendarioHasta\"\n                      :close-on-content-click=\"false\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"290px\"\n                    >\n                      <template v-slot:activator=\"{ on }\">\n                        <v-text-field\n                          :value=\"formatDate(poliza.vigencia_hasta)\"\n                          @click:clear=\"\n                          $nextTick(() => (poliza.vigencia_hasta = null))\n                        \"\n                          clearable\n                          label=\"Hasta\"\n                          v-on=\"on\"\n                        ></v-text-field>\n                      </template>\n                      <v-date-picker\n                        v-model=\"poliza.vigencia_hasta\"\n                        clearable\n                        color=\"primary lighten-1\"\n                        no-title\n                        scrollable\n                        locale=\"es-la\"\n                        @input=\"calendarioHasta = false\"\n                      >\n                      </v-date-picker>\n                    </v-menu>\n                  </v-col>\n                  <v-col class=\"py-0 d-flex flex-column justify-space-between\">\n                    <v-menu\n                      v-model=\"calendarioSolicitud\"\n                      :close-on-content-click=\"false\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"290px\"\n                    >\n                      <template v-slot:activator=\"{ on }\">\n                        <v-text-field\n                          :value=\"formatDate(poliza.fecha_solicitud)\"\n                          @click:clear=\"\n                          $nextTick(() => (poliza.fecha_solicitud = null))\n                        \"\n                          clearable\n                          label=\"Solicitud\"\n                          v-on=\"on\"\n                        ></v-text-field>\n                      </template>\n                      <v-date-picker\n                        v-model=\"poliza.fecha_solicitud\"\n                        clearable\n                        color=\"primary lighten-1\"\n                        no-title\n                        scrollable\n                        locale=\"es-la\"\n                        @input=\"calendarioSolicitud = false\"\n                      >\n                      </v-date-picker>\n                    </v-menu>\n                    <v-menu\n                      v-model=\"calendarioEmision\"\n                      :close-on-content-click=\"false\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"290px\"\n                    >\n                      <template v-slot:activator=\"{ on }\">\n                        <v-text-field\n                          :value=\"formatDate(poliza.fecha_emision)\"\n                          @click:clear=\"\n                          $nextTick(() => (poliza.fecha_emision = null))\n                        \"\n                          clearable\n                          label=\"Emision\"\n                          v-on=\"on\"\n                        ></v-text-field>\n                      </template>\n                      <v-date-picker\n                        v-model=\"poliza.fecha_emision\"\n                        clearable\n                        color=\"primary lighten-1\"\n                        no-title\n                        scrollable\n                        locale=\"es-la\"\n                        @input=\"calendarioEmision = false\"\n                      >\n                      </v-date-picker>\n                    </v-menu>\n                    <v-menu\n                      v-model=\"calendarioRecepcion\"\n                      :close-on-content-click=\"false\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"290px\"\n                    >\n                      <template v-slot:activator=\"{ on }\">\n                        <v-text-field\n                          :value=\"formatDate(poliza.fecha_recepcion)\"\n                          @click:clear=\"\n                          $nextTick(() => (poliza.fecha_recepcion = null))\n                        \"\n                          clearable\n                          label=\"Recepcion\"\n                          v-on=\"on\"\n                        ></v-text-field>\n                      </template>\n                      <v-date-picker\n                        v-model=\"poliza.fecha_recepcion\"\n                        clearable\n                        color=\"primary lighten-1\"\n                        no-title\n                        scrollable\n                        locale=\"es-la\"\n                        @input=\"calendarioRecepcion = false\"\n                      >\n                      </v-date-picker>\n                    </v-menu>\n                  </v-col>\n                  <v-col class=\"py-0 d-flex flex-column justify-space-between\">\n                    <v-menu\n                      v-model=\"calendarioEntregaOriginal\"\n                      :close-on-content-click=\"false\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"290px\"\n                    >\n                      <template v-slot:activator=\"{ on }\">\n                        <v-text-field\n                          :value=\"formatDate(poliza.fecha_entrega_original)\"\n                          @click:clear=\"\n                          $nextTick(() => (poliza.fecha_entrega_original = null))\n                        \"\n                          clearable\n                          label=\"Entrega Original\"\n                          v-on=\"on\"\n                        ></v-text-field>\n                      </template>\n                      <v-date-picker\n                        v-model=\"poliza.fecha_entrega_original\"\n                        clearable\n                        color=\"primary lighten-1\"\n                        no-title\n                        scrollable\n                        locale=\"es-la\"\n                        @input=\"calendarioEntregaOriginal = false\"\n                      >\n                      </v-date-picker>\n                    </v-menu>\n                    <v-menu\n                      v-model=\"calendarioEnviadoMail\"\n                      :close-on-content-click=\"false\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"290px\"\n                    >\n                      <template v-slot:activator=\"{ on }\">\n                        <v-text-field\n                          :value=\"formatDate(poliza.fecha_entrega_mail)\"\n                          @click:clear=\"\n                          $nextTick(() => (poliza.fecha_entrega_mail = null))\n                        \"\n                          clearable\n                          label=\"Enviado x Mail\"\n                          v-on=\"on\"\n                        ></v-text-field>\n                      </template>\n                      <v-date-picker\n                        v-model=\"poliza.fecha_entrega_mail\"\n                        clearable\n                        color=\"primary lighten-1\"\n                        no-title\n                        scrollable\n                        locale=\"es-la\"\n                        @input=\"calendarioEnviadoMail = false\"\n                      >\n                      </v-date-picker>\n                    </v-menu>\n                    <v-menu\n                      v-model=\"calendarioEntrgaCorreo\"\n                      :close-on-content-click=\"false\"\n                      transition=\"scale-transition\"\n                      offset-y\n                      min-width=\"290px\"\n                    >\n                      <template v-slot:activator=\"{ on }\">\n                        <v-text-field\n                          :value=\"formatDate(poliza.fecha_entrega_correo)\"\n                          @click:clear=\"\n                          $nextTick(() => (poliza.fecha_entrega_correo = null))\n                        \"\n                          clearable\n                          label=\"Entrega x Correo\"\n                          v-on=\"on\"\n                        ></v-text-field>\n                      </template>\n                      <v-date-picker\n                        v-model=\"poliza.fecha_entrega_correo\"\n                        clearable\n                        color=\"primary lighten-1\"\n                        no-title\n                        scrollable\n                        locale=\"es-la\"\n                        @input=\"calendarioEntrgaCorreo = false\"\n                      >\n                      </v-date-picker>\n                    </v-menu>\n                  </v-col>\n                </v-row>\n                <v-row>\n                  <v-col class=\"mt-0 py-0\">\n                    <v-textarea\n                      v-model=\"poliza.detalle_medio_pago\"\n                      class=\"mt-0 pt-0\"\n                      label=\"Detalle\"\n                    ></v-textarea>\n                  </v-col>\n                </v-row>\n              </v-col>\n            </v-row>\n          </v-card-text>\n          <v-card-actions class=\"mt-0 py-0 d-flex justify-end\">\n            <v-btn\n              class=\"mb-2\"\n              color=\"red\"\n              text\n              @click=\"volver\"\n            >Volver</v-btn>\n            <v-btn\n              class=\"mb-2\"\n              color=\"green\"\n              @click=\"update\"\n              text\n              native-type=\"submit\"\n            >Guardar</v-btn>\n          </v-card-actions>\n        </v-container>\n      </v-form>\n    </v-card>\n    <v-row>\n      <v-col>\n        <tabla-endosos />\n      </v-col>\n      <v-col>\n        <tabla-siniestros />\n      </v-col>\n    </v-row>\n    <v-dialog\n      @click:outside=\"HIDE_MODAL(false)\"\n      :value=\"modal\"\n      max-width=\"20%\"\n    >\n      <modal-crear-riesgo />\n    </v-dialog>\n    <v-dialog\n      :value=\"modal_ra\"\n      max-width=\"20%\"\n    >\n      <modal-riesgo-automotor />\n    </v-dialog>\n    <transition-group\n      name=\"smooth\"\n      tag=\"div\"\n    >\n      <v-dialog\n        :value=\"modal_or\"\n        max-width=\"50%\"\n      >\n        <modal-otros-riesgos />\n      </v-dialog>\n    </transition-group>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState, mapMutations } from \"vuex\";\nimport moment from \"moment\";\nimport { helpers } from \"../../../helpers\";\nimport TablaEndosos from \"./Endosos/TablaEndosos\";\nimport TablaSiniestros from \"./Siniestros/TablaSiniestros\";\nimport ModalCrearRiesgo from \"./Riesgos/ModalCrearRiesgo\";\nimport ModalOtrosRiesgos from \"./Riesgos/Otros Riesgos/ModalOtrosRiesgos\";\nimport ModalRiesgoAutomotor from \"./Riesgos/Automotor/ModalRiesgoAutomotor\";\n\nexport default {\n  mixins: [helpers],\n  components: {\n    TablaEndosos,\n    TablaSiniestros,\n    ModalCrearRiesgo,\n    ModalOtrosRiesgos,\n    ModalRiesgoAutomotor\n  },\n  data: () => ({\n    calendarioDesde: false,\n    calendarioHasta: false,\n    calendarioSolicitud: false,\n    calendarioEmision: false,\n    calendarioEntregaOriginal: false,\n    calendarioEnviadoMail: false,\n    calendarioEntrgaCorreo: false,\n    calendarioRecepcion: false,\n    plan_pagos: [\n      {\n        value: \"MENSUAL\"\n      },\n      {\n        value: \"TRIMESTRAL\"\n      },\n      {\n        value: \"SEMESTRAL\"\n      },\n      {\n        value: \"ANUAL\"\n      },\n      {\n        value: \"TOTAL\"\n      }\n    ],\n    rules: {\n      required: value => !!value || \"Este campo obligatorio\"\n    }\n  }),\n  computed: {\n    ...mapState(\"cliente\", [\"clientes\"]),\n    ...mapState(\"compania\", [\"companias\"]),\n    ...mapState(\"codigo_productor\", [\"codigo_productores\"]),\n    ...mapState(\"poliza\", [\n      \"poliza\",\n      \"tipo_riesgos\",\n      \"forma_pagos\",\n      \"tipo_vigencias\"\n    ]),\n    ...mapState(\"modal\", [\"modal\", \"modal_ra\", \"modal_or\"])\n  },\n  methods: {\n    ...mapActions(\"cliente\", [\"getClientes\"]),\n    ...mapActions(\"poliza\", [\n      \"getPoliza\",\n      \"getTipoRiesgos\",\n      \"getFormaPagos\",\n      \"getTipoVigencias\",\n      \"updatePoliza\"\n    ]),\n    ...mapActions(\"compania\", [\"getCompanias\"]),\n    ...mapActions(\"codigo_productor\", [\"getCodigoProductores\"]),\n    ...mapMutations(\"poliza\", [\"RESET_POLIZA\"]),\n    ...mapMutations(\"modal\", [\"SHOW_MODAL\", \"HIDE_MODAL\"]),\n    sumarMes(mes) {\n      switch (this.poliza.tipo_vigencia_id) {\n        case 6:\n          mes = 12;\n          break;\n        case 5:\n          mes = 6;\n          break;\n        case 4:\n          mes = 4;\n          break;\n        case 3:\n          mes = 3;\n          break;\n        case 2:\n          mes = 2;\n          break;\n        case 1:\n          mes = 1;\n          break;\n      }\n      this.poliza.vigencia_hasta = moment(this.poliza.vigencia_desde).add(\n        mes,\n        \"M\"\n      );\n      this.poliza.vigencia_hasta.set(\"hour\", 12);\n      this.poliza.vigencia_hasta.set(\"minute\", 0);\n      this.poliza.vigencia_hasta.set(\"second\", 0);\n      this.poliza.vigencia_hasta = this.poliza.vigencia_hasta.toJSON();\n    },\n    volver() {\n      this.$router.push({\n        name: \"Automotor\"\n      });\n      // this.RESET_POLIZA();\n    },\n    async update() {\n      if (this.$refs.form.validate()) {\n        const createResult = await this.updatePoliza(this.poliza);\n        if (createResult) {\n          this.$router.push({\n            name: \"Automotor\"\n          });\n          this.RESET_POLIZA();\n        }\n      }\n    }\n    // checkIfHasRiesgo() {\n    //   console.log(this.poliza.riesgo_automotor);\n    //   console.log(this.poliza.otro_riesgo);\n    //   if (\n    //     this.poliza.riesgo_automotor.length < 1 ||\n    //     this.poliza.otro_riesgo.length < 1\n    //   ) {\n    //     this.SHOW_MODAL(true);\n    //   }\n    // }\n  },\n  created() {\n    this.getPoliza(this.$route.params.numero_solicitud);\n    this.getClientes();\n    this.getCompanias();\n    this.getTipoRiesgos();\n    this.getFormaPagos();\n    this.getTipoVigencias();\n    // this.checkIfHasRiesgo();\n    this.sumarMes();\n  },\n  beforeDestroy() {\n    this.RESET_POLIZA();\n  }\n};\n</script>\n\n<style>\n.smooth-enter-active,\n.smooth-leave-active {\n  transition: opacity 0.5s;\n}\n.smooth-enter,\n.smooth-leave-to {\n  o\n</style>"]}]}