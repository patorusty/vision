{"remainingRequest":"/Users/patorusty/dev/web/vision/front/node_modules/babel-loader/lib/index.js!/Users/patorusty/dev/web/vision/front/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/patorusty/dev/web/vision/front/src/views/pages/Administracion/Companias/CodigoOrganizador/ModalCodigoOrganizador.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/patorusty/dev/web/vision/front/src/views/pages/Administracion/Companias/CodigoOrganizador/ModalCodigoOrganizador.vue","mtime":1613968134300},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3BhdG9ydXN0eS9kZXYvd2ViL3Zpc2lvbi9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9wYXRvcnVzdHkvZGV2L3dlYi92aXNpb24vZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucywgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IGhlbHBlcnMgfSBmcm9tICIuLi8uLi8uLi8uLi8uLi9oZWxwZXJzIjsKaW1wb3J0IGh0dHAgZnJvbSAiLi4vLi4vLi4vLi4vLi4vaHR0cC1yZXF1ZXN0IjsKaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICJkZWJvdW5jZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtoZWxwZXJzXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcnVsZXM6IHsKICAgICAgICByZXF1aXJlZDogZnVuY3Rpb24gcmVxdWlyZWQodmFsdWUpIHsKICAgICAgICAgIHJldHVybiAhIXZhbHVlIHx8ICJFc3RlIGNhbXBvIG9ibGlnYXRvcmlvIjsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNvVXNhZG86IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKCJjb2RpZ29fb3JnYW5pemFkb3IiLCBbImNvZGlnb19vcmdhbml6YWRvciJdKSwge30sIG1hcFN0YXRlKCJjb21wYW5pYSIsIFsiY29tcGFuaWEiXSksIHt9LCBtYXBTdGF0ZSgib3JnYW5pemFkb3IiLCBbIm9yZ2FuaXphZG9yZXMiXSksIHt9LCBtYXBTdGF0ZSgibW9kYWwiLCBbIm1vZGFsIiwgImVkaWNpb24iXSkpLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoImNvZGlnb19vcmdhbml6YWRvciIsIFsicmVzZXRDb2RpZ29Pcmdhbml6YWRvclN0YXRlIiwgInVwZGF0ZUNvZGlnb09yZ2FuaXphZG9yIiwgImNyZWF0ZUNvZGlnb09yZ2FuaXphZG9yIl0pLCB7fSwgbWFwTXV0YXRpb25zKCJtb2RhbCIsIFsiSElERV9NT0RBTCJdKSwge30sIG1hcE11dGF0aW9ucygiY29kaWdvX29yZ2FuaXphZG9yIiwgWyJSRVNFVF9DT0RJR09fT1JHQU5JWkFET1IiXSksIHsKICAgIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY3JlYXRlUmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5jb2RpZ29fb3JnYW5pemFkb3IuY29tcGFuaWFfaWQgPSBfdGhpcy5jb21wYW5pYS5pZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNyZWF0ZUNvZGlnb09yZ2FuaXphZG9yKF90aGlzLmNvZGlnb19vcmdhbml6YWRvcik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGNyZWF0ZVJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKGNyZWF0ZVJlc3VsdCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZU1vZGFsKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgdXBkYXRlUmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMi4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnVwZGF0ZUNvZGlnb09yZ2FuaXphZG9yKF90aGlzMi5jb2RpZ29fb3JnYW5pemFkb3IpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB1cGRhdGVSZXN1bHQgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAodXBkYXRlUmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5jbG9zZU1vZGFsKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNsb3NlTW9kYWw6IGZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7CiAgICAgIHRoaXMuSElERV9NT0RBTChmYWxzZSk7CiAgICAgIHRoaXMuUkVTRVRfQ09ESUdPX09SR0FOSVpBRE9SKCk7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgICAgdGhpcy5jb1VzYWRvID0gZmFsc2U7CiAgICB9LAogICAgYnVzY2FyQ086IGRlYm91bmNlKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgdmFyIHJlc3A7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCEodGhpcy5jb2RpZ29fb3JnYW5pemFkb3IuY29kaWdvX29yZ2FuaXphZG9yICYmIHRoaXMuY29kaWdvX29yZ2FuaXphZG9yLmNvZGlnb19vcmdhbml6YWRvciAhPSB0aGlzLmNvZGlnb19vcmdhbml6YWRvci5jb09yaWdpbmFsKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGh0dHAucG9zdCgiL2NvZGlnb19vcmdhbml6YWRvci9idXNxdWVkYUNPIiwgewogICAgICAgICAgICAgICAgY29kaWdvOiB0aGlzLmNvZGlnb19vcmdhbml6YWRvci5jb2RpZ29fb3JnYW5pemFkb3IsCiAgICAgICAgICAgICAgICBjb21wYW5pYV9pZDogdGhpcy5jb21wYW5pYS5pZAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICB0aGlzLmNvVXNhZG8gPSByZXNwLmRhdGEudXNhZG87CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICB9KSksIDUwMCkKICB9KSwKICB3YXRjaDogewogICAgbW9kYWw6IGZ1bmN0aW9uIG1vZGFsKCkgewogICAgICBpZiAoIXRoaXMubW9kYWwpIHsKICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["ModalCodigoOrganizador.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      <span>Codigo Organizador</span>\n    </v-card-title>\n    <v-card-text>\n      <v-container>\n        <v-form ref=\"form\">\n          <v-row>\n            <v-col>\n              <v-select\n                label=\"Seleccione Organizador\"\n                v-model=\"codigo_organizador.organizador_id\"\n                :items=\"organizadores\"\n                :item-text=\"codigoText\"\n                item-value=\"id\"\n                :rules=\"[rules.required]\"\n              >\n              </v-select>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col>\n              <v-text-field\n                v-uppercase\n                label=\"Codigo Organizador\"\n                v-model=\"codigo_organizador.codigo_organizador\"\n                :rules=\"[\n                  rules.required,\n                  !coUsado || 'Este codigo organizador ya está en uso',\n                ]\"\n                @keyup=\"buscarCO\"\n              >\n              </v-text-field>\n            </v-col>\n            <v-col>\n              <v-switch\n                v-model=\"codigo_organizador.activo\"\n                label=\"Codigo Organizador Activo?\"\n              ></v-switch>\n            </v-col>\n          </v-row>\n        </v-form>\n      </v-container>\n    </v-card-text>\n    <v-card-actions class=\"d-flex justify-end\">\n      <v-btn\n        class=\"mb-2\"\n        color=\"red\"\n        text\n        @click=\"closeModal\"\n      >Cerrar</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-if=\"!edicion\"\n        color=\"green\"\n        @click=\"create\"\n        text\n        native-type=\"submit\"\n      >Crear</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-else\n        @click=\"update\"\n        text\n        color=\"green\"\n      >Guardar</v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nimport { mapState, mapActions, mapMutations } from \"vuex\";\nimport { helpers } from \"../../../../../helpers\";\nimport http from \"../../../../../http-request\";\nimport { debounce } from \"debounce\";\n\nexport default {\n  mixins: [helpers],\n  data: () => ({\n    rules: {\n      required: value => !!value || \"Este campo obligatorio\"\n    },\n    coUsado: false\n  }),\n  computed: {\n    ...mapState(\"codigo_organizador\", [\"codigo_organizador\"]),\n    ...mapState(\"compania\", [\"compania\"]),\n    ...mapState(\"organizador\", [\"organizadores\"]),\n    ...mapState(\"modal\", [\"modal\", \"edicion\"])\n  },\n  methods: {\n    ...mapActions(\"codigo_organizador\", [\n      \"resetCodigoOrganizadorState\",\n      \"updateCodigoOrganizador\",\n      \"createCodigoOrganizador\"\n    ]),\n    ...mapMutations(\"modal\", [\"HIDE_MODAL\"]),\n    ...mapMutations(\"codigo_organizador\", [\"RESET_CODIGO_ORGANIZADOR\"]),\n    async create() {\n      if (this.$refs.form.validate()) {\n        this.codigo_organizador.compania_id = this.compania.id;\n        const createResult = await this.createCodigoOrganizador(\n          this.codigo_organizador\n        );\n        if (createResult) {\n          this.closeModal();\n        }\n      }\n    },\n    async update() {\n      if (this.$refs.form.validate()) {\n        const updateResult = await this.updateCodigoOrganizador(\n          this.codigo_organizador\n        );\n        if (updateResult) {\n          this.closeModal();\n        }\n      }\n    },\n    closeModal() {\n      this.HIDE_MODAL(false);\n      this.RESET_CODIGO_ORGANIZADOR();\n      this.$refs.form.resetValidation();\n      this.coUsado = false;\n    },\n    buscarCO: debounce(async function() {\n      if (\n        this.codigo_organizador.codigo_organizador &&\n        this.codigo_organizador.codigo_organizador !=\n          this.codigo_organizador.coOriginal\n      ) {\n        const resp = await http.post(\"/codigo_organizador/busquedaCO\", {\n          codigo: this.codigo_organizador.codigo_organizador,\n          compania_id: this.compania.id\n        });\n        this.coUsado = resp.data.usado;\n      }\n    }, 500)\n  },\n  watch: {\n    modal() {\n      if (!this.modal) {\n        this.closeModal();\n      }\n    }\n  }\n};\n</script>\n\n<style>\n</style>"],"sourceRoot":"src/views/pages/Administracion/Companias/CodigoOrganizador"}]}