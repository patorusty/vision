{"remainingRequest":"/Users/patorusty/dev/web/vision/front/node_modules/babel-loader/lib/index.js!/Users/patorusty/dev/web/vision/front/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/patorusty/dev/web/vision/front/src/views/pages/Configuracion/ModalUsuarios.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/patorusty/dev/web/vision/front/src/views/pages/Configuracion/ModalUsuarios.vue","mtime":1608263910095},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3BhdG9ydXN0eS9kZXYvd2ViL3Zpc2lvbi9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9wYXRvcnVzdHkvZGV2L3dlYi92aXNpb24vZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgaHR0cCBmcm9tICIuLi8uLi8uLi9odHRwLXJlcXVlc3QiOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucywgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAiZGVib3VuY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVybDogInRpcG91c3VhcmlvIiwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgbWFpbE9yaWdpbmFsOiBudWxsLAogICAgICB0aXBvX3VzdWFyaW9zOiBbXSwKICAgICAgdGlwb191c3VhcmlvOiAiIiwKICAgICAgbWFpbFVzYWRvOiBmYWxzZSwKICAgICAgcnVsZXM6IHsKICAgICAgICByZXF1aXJlZDogZnVuY3Rpb24gcmVxdWlyZWQodmFsdWUpIHsKICAgICAgICAgIHJldHVybiAhIXZhbHVlIHx8ICJFc3RlIGNhbXBvIG9ibGlnYXRvcmlvIjsKICAgICAgICB9LAogICAgICAgIGVtYWlsOiBmdW5jdGlvbiBlbWFpbCh2YWx1ZSkgewogICAgICAgICAgdmFyIHBhdHRlcm4gPSAvXigoW148PigpW1xdXFwuLDs6XHNAIl0rKFwuW148PigpW1xdXFwuLDs6XHNAIl0rKSopfCgiLisiKSlAKChcW1swLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31dKXwoKFthLXpBLVpcLTAtOV0rXC4pK1thLXpBLVpdezIsfSkpJC87CiAgICAgICAgICByZXR1cm4gcGF0dGVybi50ZXN0KHZhbHVlKSB8fCAiSWdyZXNlIHVuIGVtYWlsIHbDoWxpZG8iOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSgidXN1YXJpb3MiLCBbInVzdWFyaW8iXSksIHt9LCBtYXBTdGF0ZSgibW9kYWwiLCBbIm1vZGFsIiwgImVkaWNpb24iXSkpLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoInVzdWFyaW9zIiwgWyJnZXRVc3VhcmlvIiwgInJlc2V0VXN1YXJpb1N0YXRlIiwgInVwZGF0ZVVzdWFyaW8iLCAiY3JlYXRlVXN1YXJpbyJdKSwge30sIG1hcE11dGF0aW9ucygibW9kYWwiLCBbIkhJREVfTU9EQUwiXSksIHt9LCBtYXBNdXRhdGlvbnMoInVzdWFyaW9zIiwgWyJSRVNFVF9VU1VBUklPIl0pLCB7CiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgdGhpcy51cGRhdGVVc3VhcmlvKHRoaXMudXN1YXJpbyk7CiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgdGhpcy51c3VhcmlvLnBhc3N3b3JkID0gIjEyMyI7CiAgICAgICAgdGhpcy5jcmVhdGVVc3VhcmlvKHRoaXMudXN1YXJpbyk7CiAgICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZU1vZGFsOiBmdW5jdGlvbiBjbG9zZU1vZGFsKCkgewogICAgICB0aGlzLkhJREVfTU9EQUwoZmFsc2UpOwogICAgICB0aGlzLlJFU0VUX1VTVUFSSU8oKTsKICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0VmFsaWRhdGlvbigpOwogICAgICB0aGlzLm1haWxPcmlnaW5hbCA9IG51bGw7CiAgICAgIHRoaXMubWFpbFVzYWRvID0gZmFsc2U7CiAgICB9LAogICAgY2FyZ2FyVGlwb19Vc3VhcmlvczogZnVuY3Rpb24gY2FyZ2FyVGlwb19Vc3VhcmlvcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGh0dHAuZ2V0KHRoaXMudXJsKS50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgX3RoaXMudGlwb191c3VhcmlvcyA9IHIuZGF0YS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBjaGVja0VtYWlsOiBkZWJvdW5jZSggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHJlc3A7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoISh0aGlzLnVzdWFyaW8uZW1haWwubGVuZ3RoID49IDYgJiYgdGhpcy5tYWlsT3JpZ2luYWwgIT0gdGhpcy51c3VhcmlvLmVtYWlsKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBodHRwLnBvc3QoIi91c3VhcmlvL2J1c3F1ZWRhTWFpbCIsIHsKICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLnVzdWFyaW8uZW1haWwKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICB0aGlzLm1haWxVc2FkbyA9IHJlc3AuZGF0YS51c2FkbzsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICB9KSksIDcwMCkKICB9KSwKICB3YXRjaDogewogICAgdXN1YXJpbzogZnVuY3Rpb24gdXN1YXJpbygpIHsKICAgICAgaWYgKHRoaXMuZWRpY2lvbikgewogICAgICAgIHRoaXMubWFpbE9yaWdpbmFsID0gdGhpcy51c3VhcmlvLmVtYWlsOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5jYXJnYXJUaXBvX1VzdWFyaW9zKCk7CiAgfQp9Ow=="},{"version":3,"sources":["ModalUsuarios.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      <span v-if=\"!edicion\" class=\"headline\">Crear Usuario</span>\n      <span v-else class=\"headline\">Editar Usuario</span>\n    </v-card-title>\n    <v-card-text>\n      <v-container>\n        <v-form ref=\"form\">\n          <v-row>\n            <v-col cols=\"12\" sm=\"6\" md=\"6\">\n              <v-text-field\n                label=\"Company\"\n                v-model=\"usuario.compania\"\n                :disabled=\"true\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"12\" sm=\"6\" md=\"6\">\n              <v-text-field\n                label=\"E-Mail\"\n                v-model=\"usuario.email\"\n                :rules=\"[\n                  rules.required,\n                  rules.email,\n                  !mailUsado || 'Este email ya está en uso'\n                ]\"\n                @keyup=\"checkEmail\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"6\">\n              <v-text-field\n                label=\"Nombre\"\n                v-model=\"usuario.nombre\"\n                :rules=\"[rules.required]\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"6\">\n              <v-text-field\n                label=\"Apellido\"\n                v-model=\"usuario.apellido\"\n                :rules=\"[rules.required]\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"12\" sm=\"4\">\n              <v-select\n                :items=\"tipo_usuarios\"\n                label=\"Tipo de Usuario\"\n                item-text=\"nombre\"\n                item-value=\"id\"\n                v-model=\"usuario.tipo_usuario_id\"\n              >\n              </v-select>\n            </v-col>\n            <v-col cols=\"12\" sm=\"4\">\n              <v-switch\n                class=\"ma-2\"\n                v-model=\"usuario.activo\"\n                label=\"Usuario Activo?\"\n              ></v-switch>\n            </v-col>\n            <v-col cols=\"12\" sm=\"4\">\n              <v-avatar color=\"red\">\n                <span class=\"white--text headline\">nombre</span>\n              </v-avatar>\n            </v-col>\n          </v-row>\n        </v-form>\n      </v-container>\n    </v-card-text>\n    <v-card-actions class=\"d-flex justify-end\">\n      <v-btn class=\"mb-2\" color=\"red\" text @click=\"closeModal\">Cerrar</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-if=\"!edicion\"\n        color=\"green\"\n        @click=\"create\"\n        text\n        native-type=\"submit\"\n        >Crear</v-btn\n      >\n      <v-btn class=\"mb-2\" v-else @click=\"update\" text color=\"green\"\n        >Guardar</v-btn\n      >\n    </v-card-actions>\n  </v-card>\n</template>\n<script>\nimport http from \"../../../http-request\";\nimport { mapState, mapActions, mapMutations } from \"vuex\";\nimport { debounce } from \"debounce\";\n\nexport default {\n  data: () => ({\n    url: \"tipousuario\",\n    dialog: false,\n    mailOriginal: null,\n    tipo_usuarios: [],\n    tipo_usuario: \"\",\n    mailUsado: false,\n    rules: {\n      required: value => !!value || \"Este campo obligatorio\",\n      email: value => {\n        const pattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return pattern.test(value) || \"Igrese un email válido\";\n      }\n    }\n  }),\n  computed: {\n    ...mapState(\"usuarios\", [\"usuario\"]),\n    ...mapState(\"modal\", [\"modal\", \"edicion\"])\n  },\n  methods: {\n    ...mapActions(\"usuarios\", [\n      \"getUsuario\",\n      \"resetUsuarioState\",\n      \"updateUsuario\",\n      \"createUsuario\"\n    ]),\n    ...mapMutations(\"modal\", [\"HIDE_MODAL\"]),\n    ...mapMutations(\"usuarios\", [\"RESET_USUARIO\"]),\n    update() {\n      if (this.$refs.form.validate()) {\n        this.updateUsuario(this.usuario);\n        this.closeModal();\n      }\n    },\n    create() {\n      if (this.$refs.form.validate()) {\n        this.usuario.password = \"123\";\n        this.createUsuario(this.usuario);\n        this.closeModal();\n      }\n    },\n    closeModal() {\n      this.HIDE_MODAL(false);\n      this.RESET_USUARIO();\n      this.$refs.form.resetValidation();\n        this.mailOriginal = null;\n        this.mailUsado = false;\n    },\n    cargarTipo_Usuarios() {\n      http.get(this.url).then(r => {\n        this.tipo_usuarios = r.data.data;\n      });\n    },\n    checkEmail: debounce(async function() {\n      if (\n        this.usuario.email.length >= 6 &&\n        this.mailOriginal != this.usuario.email\n      ) {\n        const resp = await http.post(\"/usuario/busquedaMail\", {\n          email: this.usuario.email\n        });\n        this.mailUsado = resp.data.usado;\n      }\n    }, 700)\n  },\n  watch: {\n    usuario: function() {\n      if (this.edicion) {\n        this.mailOriginal = this.usuario.email;\n      }\n    }\n  },\n  created() {\n    this.cargarTipo_Usuarios();\n  }\n};\n</script>\n"],"sourceRoot":"src/views/pages/Configuracion"}]}