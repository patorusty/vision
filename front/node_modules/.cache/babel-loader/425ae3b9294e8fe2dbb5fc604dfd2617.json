{"remainingRequest":"/Users/patorusty/dev/web/vision/front/node_modules/babel-loader/lib/index.js!/Users/patorusty/dev/web/vision/front/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/patorusty/dev/web/vision/front/src/views/pages/Administracion/MMV/Tabs/Version/ModalVersion.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/patorusty/dev/web/vision/front/src/views/pages/Administracion/MMV/Tabs/Version/ModalVersion.vue","mtime":1626316687512},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/patorusty/dev/web/vision/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3BhdG9ydXN0eS9kZXYvd2ViL3Zpc2lvbi9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9wYXRvcnVzdHkvZGV2L3dlYi92aXNpb24vZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucywgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCBodHRwIGZyb20gIi4uLy4uLy4uLy4uLy4uLy4uL2h0dHAtcmVxdWVzdCI7CmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAiZGVib3VuY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcmVxdWlyZWQ6IGZ1bmN0aW9uIHJlcXVpcmVkKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gISF2YWx1ZSB8fCAiRXN0ZSBjYW1wbyBvYmxpZ2F0b3JpbyI7CiAgICAgICAgfQogICAgICB9LAogICAgICBub21icmVVc2FkbzogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoIm1hcmNhIiwgWyJtYXJjYXMiXSksIHt9LCBtYXBTdGF0ZSgibW9kZWxvIiwgWyJtb2RlbG8iLCAibW9kZWxvcyIsICJtYXJjYV9pZCJdKSwge30sIG1hcFN0YXRlKCJ2ZXJzaW9uIiwgWyJ2ZXJzaW9uIiwgIm1vZGVsb19pZCJdKSwge30sIG1hcFN0YXRlKCJtb2RhbCIsIFsibW9kYWwzIiwgImVkaWNpb24zIl0pKSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKCJ2ZXJzaW9uIiwgWyJjcmVhdGVWZXJzaW9uIiwgInVwZGF0ZVZlcnNpb24iXSksIHt9LCBtYXBNdXRhdGlvbnMoIm1vZGFsIiwgWyJISURFX01PREFMMyJdKSwge30sIG1hcE11dGF0aW9ucygidmVyc2lvbiIsIFsiUkVTRVRfVkVSU0lPTiJdKSwgewogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB1cGRhdGVSZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnVwZGF0ZVZlcnNpb24oX3RoaXMubW9kZWxvKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgdXBkYXRlUmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAodXBkYXRlUmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlTW9kYWwoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBjcmVhdGVSZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuY3JlYXRlVmVyc2lvbihfdGhpczIubW9kZWxvKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgY3JlYXRlUmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKGNyZWF0ZVJlc3VsdCkgewogICAgICAgICAgICAgICAgICBfdGhpczIuY2xvc2VNb2RhbCgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjbG9zZU1vZGFsOiBmdW5jdGlvbiBjbG9zZU1vZGFsKCkgewogICAgICB0aGlzLkhJREVfTU9EQUwzKGZhbHNlKTsKICAgICAgdGhpcy5SRVNFVF9WRVJTSU9OKCk7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsKICAgICAgdGhpcy5ub21icmVVc2FkbyA9IGZhbHNlOwogICAgfSwKICAgIGJ1c2Nhck1vZGVsbzogZGVib3VuY2UoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICB2YXIgcmVzcDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoISh0aGlzLnZlcnNpb24ubm9tYnJlLmxlbmd0aCA+PSAyICYmIHRoaXMudmVyc2lvbi5ub21icmUgIT0gdGhpcy52ZXJzaW9uLm5vbWJyZU9yaWdpbmFsKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGh0dHAucG9zdCgiL3ZlcnNpb25lcy9idXNxdWVkYVZlcnNpb24iLCB7CiAgICAgICAgICAgICAgICBub21icmU6IHRoaXMudmVyc2lvbi5ub21icmUsCiAgICAgICAgICAgICAgICBpZDogdGhpcy5tb2RlbG9faWQKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgdGhpcy5ub21icmVVc2FkbyA9IHJlc3AuZGF0YS51c2FkbzsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgIH0pKSwgNzAwKQogIH0pCn07"},{"version":3,"sources":["ModalVersion.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA,SAAA,QAAA,EAAA,UAAA,EAAA,YAAA,QAAA,MAAA;AACA,OAAA,IAAA,MAAA,gCAAA;AACA,SAAA,QAAA,QAAA,UAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,QAAA,EAAA,kBAAA,KAAA;AAAA,iBAAA,CAAA,CAAA,KAAA,IAAA,wBAAA;AAAA;AADA,OADA;AAIA,MAAA,WAAA,EAAA;AAJA,KAAA;AAAA,GADA;AAOA,EAAA,QAAA,oBACA,QAAA,CAAA,OAAA,EAAA,CAAA,QAAA,CAAA,CADA,MAEA,QAAA,CAAA,QAAA,EAAA,CAAA,QAAA,EAAA,SAAA,EAAA,UAAA,CAAA,CAFA,MAGA,QAAA,CAAA,SAAA,EAAA,CAAA,SAAA,EAAA,WAAA,CAAA,CAHA,MAIA,QAAA,CAAA,OAAA,EAAA,CAAA,QAAA,EAAA,UAAA,CAAA,CAJA,CAPA;AAaA,EAAA,OAAA,oBACA,UAAA,CAAA,SAAA,EAAA,CAAA,eAAA,EAAA,eAAA,CAAA,CADA,MAEA,YAAA,CAAA,OAAA,EAAA,CAAA,aAAA,CAAA,CAFA,MAGA,YAAA,CAAA,SAAA,EAAA,CAAA,eAAA,CAAA,CAHA;AAIA,IAAA,MAJA,oBAIA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QAAA,EADA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAEA,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,MAAA,CAFA;;AAAA;AAEA,gBAAA,YAFA;;AAGA,oBAAA,YAAA,EAAA;AACA,kBAAA,KAAA,CAAA,UAAA;AACA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,KAXA;AAYA,IAAA,MAZA,oBAYA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QAAA,EADA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAEA,MAAA,CAAA,aAAA,CAAA,MAAA,CAAA,MAAA,CAFA;;AAAA;AAEA,gBAAA,YAFA;;AAGA,oBAAA,YAAA,EAAA;AACA,kBAAA,MAAA,CAAA,UAAA;AACA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,KAnBA;AAoBA,IAAA,UApBA,wBAoBA;AACA,WAAA,WAAA,CAAA,KAAA;AACA,WAAA,aAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,eAAA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,KAzBA;AA0BA,IAAA,YAAA,EAAA,QAAA,uEAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEA,KAAA,OAAA,CAAA,MAAA,CAAA,MAAA,IAAA,CAAA,IACA,KAAA,OAAA,CAAA,MAAA,IAAA,KAAA,OAAA,CAAA,cAHA;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAKA,IAAA,CAAA,IAAA,CAAA,4BAAA,EAAA;AACA,gBAAA,MAAA,EAAA,KAAA,OAAA,CAAA,MADA;AAEA,gBAAA,EAAA,EAAA,KAAA;AAFA,eAAA,CALA;;AAAA;AAKA,cAAA,IALA;AASA,mBAAA,WAAA,GAAA,IAAA,CAAA,IAAA,CAAA,KAAA;;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAA,IAWA,GAXA;AA1BA;AAbA,CAAA","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      <span\n        v-if=\"!edicion3\"\n        class=\"headline\"\n      >Crear Modelo</span>\n      <span\n        v-else\n        class=\"headline\"\n      >Editar Modelo</span>\n    </v-card-title>\n    <v-card-text>\n      <v-container>\n        <v-form ref=\"form\">\n          <v-row>\n            <v-col class=\"pt-0 pb-0\">\n              <v-autocomplete\n                class=\"mt-6\"\n                v-model=\"marca_id\"\n                :items=\"marcas\"\n                item-text=\"nombre\"\n                item-value=\"id\"\n                label=\"Marca\"\n                disabled\n              ></v-autocomplete>\n              <v-autocomplete\n                class=\"mt-6\"\n                v-model=\"modelo_id\"\n                :items=\"modelos\"\n                item-text=\"nombre\"\n                item-value=\"id\"\n                label=\"Modelo\"\n                disabled\n              ></v-autocomplete>\n              <v-text-field\n                v-uppercase\n                v-model=\"version.nombre\"\n                label=\"Nombre\"\n                @keyup=\"buscarModelo\"\n                :rules=\"[\n                  rules.required,\n                  !nombreUsado || 'Este nombre ya está en uso',\n                ]\"\n              ></v-text-field>\n            </v-col>\n          </v-row>\n        </v-form>\n      </v-container>\n    </v-card-text>\n    <v-card-actions class=\"pt-0 pb-0 d-flex justify-end\">\n      <v-btn\n        class=\"mb-2\"\n        color=\"red\"\n        text\n        @click=\"closeModal\"\n      >Cerrar</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-if=\"!edicion3\"\n        color=\"green\"\n        @click=\"create\"\n        text\n        native-type=\"submit\"\n      >Crear</v-btn>\n      <v-btn\n        class=\"mb-2\"\n        v-else\n        @click=\"update\"\n        text\n        color=\"green\"\n      >Guardar</v-btn>\n    </v-card-actions>\n  </v-card>\n</template>\n\n<script>\nimport { mapState, mapActions, mapMutations } from \"vuex\";\nimport http from \"../../../../../../http-request\";\nimport { debounce } from \"debounce\";\n\nexport default {\n  data: () => ({\n    rules: {\n      required: value => !!value || \"Este campo obligatorio\"\n    },\n    nombreUsado: false\n  }),\n  computed: {\n    ...mapState(\"marca\", [\"marcas\"]),\n    ...mapState(\"modelo\", [\"modelo\", \"modelos\", \"marca_id\"]),\n    ...mapState(\"version\", [\"version\", \"modelo_id\"]),\n    ...mapState(\"modal\", [\"modal3\", \"edicion3\"])\n  },\n  methods: {\n    ...mapActions(\"version\", [\"createVersion\", \"updateVersion\"]),\n    ...mapMutations(\"modal\", [\"HIDE_MODAL3\"]),\n    ...mapMutations(\"version\", [\"RESET_VERSION\"]),\n    async update() {\n      if (this.$refs.form.validate()) {\n        const updateResult = await this.updateVersion(this.modelo);\n        if (updateResult) {\n          this.closeModal();\n        }\n      }\n    },\n    async create() {\n      if (this.$refs.form.validate()) {\n        const createResult = await this.createVersion(this.modelo);\n        if (createResult) {\n          this.closeModal();\n        }\n      }\n    },\n    closeModal() {\n      this.HIDE_MODAL3(false);\n      this.RESET_VERSION();\n      this.$refs.form.resetValidation();\n      this.nombreUsado = false;\n    },\n    buscarModelo: debounce(async function() {\n      if (\n        this.version.nombre.length >= 2 &&\n        this.version.nombre != this.version.nombreOriginal\n      ) {\n        const resp = await http.post(\"/versiones/busquedaVersion\", {\n          nombre: this.version.nombre,\n          id: this.modelo_id\n        });\n        this.nombreUsado = resp.data.usado;\n      }\n    }, 700)\n  }\n};\n</script>\n\n<style>\n</style>"],"sourceRoot":"src/views/pages/Administracion/MMV/Tabs/Version"}]}